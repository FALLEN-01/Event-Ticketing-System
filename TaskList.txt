Tasklist


Perfect â€” letâ€™s document this **completely and professionally**, with full structure, logic, flow, and relationships across your three modules:

---

# ğŸ§© PROJECT DOCUMENTATION: Event Ticketing + Verification System

**Version:** Phase 1 (Production-ready Local Build)

---

## ğŸ—ï¸ 1. Overall Architecture

This system has **three major components** working together under one root folder:

```
project-root/
â”‚
â”œâ”€â”€ backend/              # FastAPI Backend (API, DB, Email, QR)
â”œâ”€â”€ frontend/             # React + Vite Web Interface (Form + Admin)
â”œâ”€â”€ flutter_app/          # Flutter App (QR Scanning & Verification)
â””â”€â”€ docker-compose.yml    # Optional for future containerization
```

Each component is modular, so they can run independently or connect via REST APIs.

---

## âš™ï¸ 2. BACKEND STRUCTURE (FastAPI)

**Folder Structure**

```
backend/
â”‚
â”œâ”€â”€ main.py                     # App entry point
â”œâ”€â”€ database.py                 # DB engine, session, models base
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ registration.py         # Registration table schema
â”‚   â”œâ”€â”€ admin.py                # Admin credentials table
â”‚
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ registration.py         # Handles user form submissions
â”‚   â”œâ”€â”€ admin.py                # Admin approvals + ticket generation
â”‚   â”œâ”€â”€ verify.py               # Flutter app ticket verification API
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ email.py                # Sends confirmation/QR via email
â”‚   â”œâ”€â”€ qr_generator.py         # Generates QR code for ticket
â”‚
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ uploads/                # Payment screenshots
â”‚   â””â”€â”€ tickets/                # Generated QR tickets (PNG or PDF)
â”‚
â”œâ”€â”€ requirements.txt            # Dependencies
â””â”€â”€ .env                        # Secrets (email creds, DB URL, etc.)
```

---

### ğŸ§± Database (Local â€” SQLite, Production â€” MySQL)

#### `registrations` Table

| Column        | Type     | Description                               |
| ------------- | -------- | ----------------------------------------- |
| id            | int (PK) | Auto-increment                            |
| name          | str      | Participant name                          |
| email         | str      | Participant email                         |
| phone         | str      | Contact number                            |
| team_name     | str      | Optional team name                        |
| event_name    | str      | Event name                                |
| payment_ss    | str      | File path to uploaded screenshot          |
| status        | enum     | `pending`, `approved`, `declined`, `used` |
| serial_number | str      | Unique ticket serial                      |
| qr_path       | str      | QR image path                             |
| created_at    | datetime | Submission timestamp                      |

#### `admins` Table

| Column        | Type     | Description     |
| ------------- | -------- | --------------- |
| id            | int (PK) | Auto-increment  |
| username      | str      | Login name      |
| password_hash | str      | Hashed password |

---

### ğŸ§© Backend Routes Overview

| Route                     | Method | Description                                               |
| ------------------------- | ------ | --------------------------------------------------------- |
| `/register`               | POST   | Form submission â€” stores user details                     |
| `/admin/list`             | GET    | Returns list of registrations                             |
| `/admin/approve/{id}`     | POST   | Approves registration, generates serial + QR, sends email |
| `/admin/decline/{id}`     | POST   | Declines registration                                     |
| `/verify-ticket/{serial}` | GET    | Verifies QR or serial number                              |
| `/mark-used/{serial}`     | POST   | Marks ticket as used after successful entry               |

---

### ğŸ” Email & QR Integration (Phase 2)

* **QR:** Generated via `qrcode[pil]`
* **Email:** Sent using `aiosmtplib` with an embedded QR code or attached ticket

---

## ğŸŒ 3. FRONTEND STRUCTURE (React + Vite)

**Folder Structure**

```
frontend/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ LandingPage.jsx          # Landing with buttons: â€œRegisterâ€ / â€œAdminâ€
â”‚   â”‚   â”œâ”€â”€ RegisterForm.jsx         # User registration form
â”‚   â”‚   â”œâ”€â”€ AdminDashboard.jsx       # Admin dashboard overview
â”‚   â”‚   â”œâ”€â”€ ViewDetails.jsx          # Detailed view for each registration
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ FormField.jsx
â”‚   â”‚   â”œâ”€â”€ TableView.jsx
â”‚   â”‚   â”œâ”€â”€ ScreenshotPreview.jsx
â”‚   â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ registrationApi.js       # POST /register, GET /list, etc.
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚
â”‚   â””â”€â”€ App.jsx
â”‚
â””â”€â”€ package.json
```

---

### ğŸ§  Frontend Flow

1. **Landing Page**

   * Buttons: â€œRegisterâ€ â†’ opens `RegisterForm`
   * â€œAdmin Dashboardâ€ â†’ opens admin login panel

2. **RegisterForm**

   * Inputs for name, email, phone, team info, event, etc.
   * Upload screenshot (later phase)
   * On Submit â†’ calls `POST /register`

3. **AdminDashboard**

   * Lists pending / approved / declined registrations
   * Click to view full details & screenshot
   * Approve â†’ triggers `/admin/approve/{id}`
   * Decline â†’ triggers `/admin/decline/{id}`
   * Exports data to CSV or prints

4. **ViewDetails**

   * Shows registration data (left panel)
   * Screenshot preview (right panel)
   * Approve/Decline buttons at bottom

---

## ğŸ“± 4. FLUTTER APP STRUCTURE (QR Verifier)

**Folder Structure**

```
flutter_app/
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ scanner_screen.dart     # Main QR Scanner + fallback input
â”‚   â”‚   â”œâ”€â”€ details_screen.dart     # Displays participant details + Continue button
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api_service.dart        # Handles FastAPI calls
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ ticket_card.dart        # Displays scanned data nicely
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ constants.dart
â”‚
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ icons/
â”‚
â””â”€â”€ pubspec.yaml
```

---

### ğŸ§© Flutter App Logic

#### ğŸ§­ Main Flow

1. **ScannerScreen**

   * Uses `qr_code_scanner` camera
   * On QR scan success â†’ extract serial number
   * Calls API:

     ```
     GET /verify-ticket/{serial}
     ```
   * If success â†’ navigate to `DetailsScreen`

2. **DetailsScreen**

   * Shows participant details (`name`, `team`, `event`)
   * Two buttons:

     * âœ… **Continue** â†’ calls `POST /mark-used/{serial}`, then resets scanner
     * âŒ **Cancel** â†’ go back to scanner without marking used

3. **Manual Input (Fallback)**

   * TextField + â€œVerifyâ€ button below scanner
   * Allows entering serial manually (for damaged QR)

---

### ğŸ§± Flutter Dependencies

`pubspec.yaml`:

```yaml
dependencies:
  flutter:
    sdk: flutter
  qr_code_scanner: ^1.0.1
  http: ^1.2.0
  flutter_spinkit: ^5.2.0
  vibration: ^1.9.0
  google_fonts: ^6.1.0
```

---

### ğŸ”— Flutter â†” Backend Data Exchange

| Action                  | Method | Endpoint                  | Response                  |
| ----------------------- | ------ | ------------------------- | ------------------------- |
| Scan QR / Manual verify | GET    | `/verify-ticket/{serial}` | Ticket details or invalid |
| Continue (Mark Used)    | POST   | `/mark-used/{serial}`     | Success/Fail status       |

---

## ğŸ§© 5. Deployment / Dev Notes

| Environment | Component    | Command                     |
| ----------- | ------------ | --------------------------- |
| Backend     | FastAPI      | `uvicorn main:app --reload` |
| Frontend    | Vite + React | `npm run dev`               |
| Flutter App | Android/iOS  | `flutter run`               |

Local DB will be stored as `backend/database.db` during testing.
You can later switch to MySQL via `.env` update:

```
DATABASE_URL=mysql+pymysql://user:pass@localhost/event_db
```

---

## ğŸš€ Phase 1 Summary

| Module                      | Purpose                              | Status              |
| --------------------------- | ------------------------------------ | ------------------- |
| **Frontend (React + Vite)** | Registration form + admin panel      | ğŸŸ¡ In setup         |
| **Backend (FastAPI)**       | Core APIs + local DB + QR logic stub | ğŸŸ¡ In progress      |
| **Flutter App**             | QR scanning & ticket validation      | ğŸŸ¡ Design finalized |
| **Database**                | Local SQLite                         | âœ… Ready             |
| **Email + QR Sending**      | (Phase 2)                            | â³ Upcoming          |

---

### âœ… PHASE 1 GOALS

* [x] Set up folder structure
* [x] Create base backend + DB + endpoints stubs
* [x] Setup React Vite app for form + dashboard
* [x] Setup Flutter base app with scanner logic
* [ ] Connect all via REST (endpoints testing next)
